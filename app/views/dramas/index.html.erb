<section class="browse-dramas">
  <ul class="grid cs-style-3">
    <% @dramas.each do |drama| %>
      <li>
        <figure>
          <%= image_tag drama.poster.url(:original) %>
          <figcaption>
            <h3>
              <%= drama.name %>
              &#40;<%= drama.release_date %>&#41;
            </h3>
            <span><%= truncate drama.plot, length: 100 %></span>
            <%= link_to raw("<strong>+</strong> to watched list"), "#", class: 'add-to-list', title: 'add this drama to your watched list' %>
          </figcaption>
        </figure>
      </li>
    <% end %>
  </ul>
</section>

<style type="text/css">
      .free-wall {
        margin: 15px;
      }
      .cell {
        cursor: move;
      }
      .cell .cover {
        padding: 15px;
      }
      .handle {
        border: 1px dotted orange;
        padding: 4px
      }
    </style>
  </head>
  <body>

    <div class="layout">
      <div id="freewall" class="free-wall">
        <div class='cell' style='width:300px; height: 300px; background-color:rgb(142, 68, 173)' data-handle=".handle">
          <div class='cover'>
            <div class='handle'>Drag item handle</div>
            <%= image_tag @dramas.first.poster.url(:original) %>
          </div>
        </div>
      </div>
    </div>
    <script type="text/javascript">

      var temp = "<div class='cell' style='width:{width}px; height: {height}px; background-color: {color}'><div class='cover'>Demo draggable</div></div>";
      var colour = [
        "rgb(243, 156, 18)",
        "rgb(211, 84, 0)",
        "rgb(0, 106, 63)",
        "rgb(41, 128, 185)",
        "rgb(192, 57, 43)",
        "rgb(135, 0, 0)",
        "rgb(39, 174, 96)"
      ];

      var w = 1, h = 1,  color = '', limitItem = 28;
      for (var i = 0; i < limitItem; ++i) {
        h = 1 + 3 * Math.random() << 0;
        w = 1 + 3 * Math.random() << 0;
        color = colour[colour.length * Math.random() << 0];
        html = temp.replace(/\{height\}/g, h*150).replace(/\{width\}/g, w*150).replace("{color}", color);
        $("#freewall").append(html);
      }


      var wall = new Freewall("#freewall");
      wall.reset({
        draggable: true,
        selector: '.cell',
        animate: true,
        cellW: 150,
        cellH: 150,
        onResize: function() {
          wall.refresh();
        },
        onBlockMove: function() {
          console.log(this);
        }
      });
      wall.fitWidth();
      // for scroll bar appear;
      $(window).trigger("resize");
    </script>